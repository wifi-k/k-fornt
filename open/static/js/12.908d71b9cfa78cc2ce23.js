webpackJsonp([12],{489:function(a,e,t){function r(a){t(601)}var s=t(201)(t(578),t(603),r,null,null);a.exports=s.exports},578:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t(202),s=t(131),o={};e.default={data:function(){var a=function(a,e,t){var r=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X|x)$/;return""===e?t(new Error("身份证号不能为空")):r.test(e)?void t():t(new Error("身份证号格式不对"))};return{ruleForm2:{name:"",idNums:""},rules2:{name:[{validator:function(a,e,t){var r=/^[\u4e00-\u9fa5]{2,4}$/;if(""===e)t(new Error("姓名不能为空"));else if(!r.test(e))return t(new Error("请输入真实姓名"));t()},trigger:"blur"}],idNums:[{validator:a,trigger:"blur"}]},postData:{token:""},imageUrl:"",imageUrlBack:"",actionPath:"https://upload.qiniup.com",imgIdBack:"",imgIdUser:"",statusText:"",reason:"",formdisabled:!1}},methods:{handleAvatarSuccess:function(a,e){o.imageUrl=URL.createObjectURL(e.raw),o.imgIdUser=a.key,s.a.set("imgIdUserkey",a.key)},handleAvatarSuccessBack:function(a,e){console.log(a.key),o.imgIdBack=a.key,o.imageUrlBack=URL.createObjectURL(e.raw),s.a.set("imgIdbackey",a.key)},submitForm:function(a){o.$refs[a].validate(function(a){if(!a)return!1;var e={name:o.ruleForm2.name,idNum:o.ruleForm2.idNums,imgIdBack:o.imgIdBack,imgIdUser:o.imgIdUser};r.a.applyDeveloper(e).then(function(a){0==a.data.code?o.$notify({title:"成功",message:"提交成功",type:"success",duration:1500}):1!=a.data.code&&2!=a.data.code||o.$token()})})},resetForm:function(a){console.log(a),this.$refs[a].resetFields()},getToken:function(){r.a.GetTokenqiniu().then(function(a){0==a.data.code&&(o.postData.token=a.data.data.token)})}},mounted:function(){o.getToken();var a=s.a.get("imgIdbackey")||"",e=s.a.get("imgIdUserkey")||"";o.imgIdBack=a,o.imgIdUser=e,r.a.applyResult().then(function(a){var e=a.data;if(null==e.data&&(o.statusText="未认证"),0==a.data.code&&null!=e.data)switch(o.ruleForm2.name=e.data.name,o.ruleForm2.idNums=e.data.idNum,o.imageUrl=e.data.imgIdUser,o.imageUrlBack=e.data.imgIdBack,e.data.status){case 0:o.statusText="审核中";break;case 1:o.statusText="审核通过",o.formdisabled=!0;break;case 2:o.statusText="审核失败",o.reason="："+e.data.reason;break;default:o.statusText="未认证"}1!=a.data.code&&2!=a.data.code||o.$token()})},beforeCreate:function(){o=this}}},582:function(a,e,t){e=a.exports=t(486)(!1),e.push([a.i,".uploadBox{display:inline-block;margin-right:20px}.uploadBox .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.uploadBox .el-upload:hover{border-color:#409eff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:220px;height:178px;line-height:178px;text-align:center}.avatar{width:220px;height:178px;display:block}.uploadBox .el-upload__tip{text-align:center}",""])},601:function(a,e,t){var r=t(582);"string"==typeof r&&(r=[[a.i,r,""]]),r.locals&&(a.exports=r.locals);t(487)("26f09ca8",r,!0,{})},603:function(a,e){a.exports={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:a.ruleForm2,"status-icon":"",rules:a.rules2,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"认证状态："}},[t("span",[a._v(a._s(a.statusText)+a._s(a.reason))])]),a._v(" "),t("el-form-item",{attrs:{label:"真实姓名：",prop:"name"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",autocomplete:"off",disabled:a.formdisabled},model:{value:a.ruleForm2.name,callback:function(e){a.$set(a.ruleForm2,"name",e)},expression:"ruleForm2.name"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"身份证号：",prop:"idNums"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{maxlength:"18",disabled:a.formdisabled,autocomplete:"off"},model:{value:a.ruleForm2.idNums,callback:function(e){a.$set(a.ruleForm2,"idNums",e)},expression:"ruleForm2.idNums"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"身份证上传："}},[t("el-upload",{staticClass:"uploadBox",attrs:{action:a.actionPath,data:a.postData,"show-file-list":!1,"on-success":a.handleAvatarSuccess,disabled:a.formdisabled}},[a.imageUrl?t("img",{staticClass:"avatar",attrs:{src:a.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a._v("手持身份证半身照")])]),a._v(" "),t("el-upload",{staticClass:"uploadBox",attrs:{action:a.actionPath,data:a.postData,"show-file-list":!1,"on-success":a.handleAvatarSuccessBack,disabled:a.formdisabled}},[a.imageUrlBack?t("img",{staticClass:"avatar",attrs:{src:a.imageUrlBack}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a._v("身份证反面")])])],1),a._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",disabled:a.formdisabled},on:{click:function(e){a.submitForm("ruleForm2")}}},[a._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=12.908d71b9cfa78cc2ce23.js.map