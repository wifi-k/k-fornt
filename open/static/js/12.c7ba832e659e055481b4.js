webpackJsonp([12],{489:function(a,t,e){function r(a){e(601)}var s=e(201)(e(578),e(603),r,null,null);a.exports=s.exports},578:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(202),s=e(131),o={};t.default={data:function(){var a=function(a,t,e){var r=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;return""===t?e(new Error("身份证号不能为空")):r.test(t)?void e():e(new Error("身份证号格式不对"))};return{ruleForm2:{name:"",idNums:""},rules2:{name:[{validator:function(a,t,e){""===t?e(new Error("请输入真实姓名")):e()},trigger:"blur"}],idNums:[{validator:a,trigger:"blur"}]},postData:{token:""},imageUrl:"",imageUrlBack:"",actionPath:"https://upload.qiniup.com",imgIdBack:"",imgIdUser:"",statusText:"",reason:"",formdisabled:!1}},methods:{handleAvatarSuccess:function(a,t){o.imageUrl=URL.createObjectURL(t.raw),o.imgIdUser=a.key,s.a.set("imgIdUserkey",a.key)},handleAvatarSuccessBack:function(a,t){console.log(a.key),o.imgIdBack=a.key,o.imageUrlBack=URL.createObjectURL(t.raw),s.a.set("imgIdbackey",a.key)},submitForm:function(a){o.$refs[a].validate(function(a){if(!a)return!1;var t={name:o.ruleForm2.name,idNum:o.ruleForm2.idNums,imgIdBack:o.imgIdBack,imgIdUser:o.imgIdUser};r.a.applyDeveloper(t).then(function(a){0==a.data.code?o.$notify({title:"成功",message:"提交成功",type:"success",duration:1500}):1!=a.data.code&&2!=a.data.code||o.$token()})})},resetForm:function(a){console.log(a),this.$refs[a].resetFields()},getToken:function(){r.a.GetTokenqiniu().then(function(a){0==a.data.code&&(o.postData.token=a.data.data.token)})}},mounted:function(){o.getToken();var a=s.a.get("imgIdbackey")||"",t=s.a.get("imgIdUserkey")||"";o.imgIdBack=a,o.imgIdUser=t,r.a.applyResult().then(function(a){var t=a.data;if(null==t.data&&(o.statusText="未认证"),0==a.data.code&&null!=t.data)switch(o.ruleForm2.name=t.data.name,o.ruleForm2.idNums=t.data.idNum,o.imageUrl=t.data.imgIdUser,o.imageUrlBack=t.data.imgIdBack,t.data.status){case 0:o.statusText="审核中";break;case 1:o.statusText="审核通过",o.formdisabled=!0;break;case 2:o.statusText="审核失败",o.reason="："+t.data.reason;break;default:o.statusText="未认证"}1!=a.data.code&&2!=a.data.code||o.$token()})},beforeCreate:function(){o=this}}},582:function(a,t,e){t=a.exports=e(486)(!1),t.push([a.i,".uploadBox{display:inline-block;margin-right:20px}.uploadBox .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.uploadBox .el-upload:hover{border-color:#409eff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:220px;height:178px;line-height:178px;text-align:center}.avatar{width:220px;height:178px;display:block}.uploadBox .el-upload__tip{text-align:center}",""])},601:function(a,t,e){var r=e(582);"string"==typeof r&&(r=[[a.i,r,""]]),r.locals&&(a.exports=r.locals);e(487)("26f09ca8",r,!0,{})},603:function(a,t){a.exports={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("el-row",[e("el-col",{attrs:{span:24}},[e("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:a.ruleForm2,"status-icon":"",rules:a.rules2,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"认证状态："}},[e("span",[a._v(a._s(a.statusText)+a._s(a.reason))])]),a._v(" "),e("el-form-item",{attrs:{label:"真实姓名：",prop:"name"}},[e("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",autocomplete:"off",disabled:a.formdisabled},model:{value:a.ruleForm2.name,callback:function(t){a.$set(a.ruleForm2,"name",t)},expression:"ruleForm2.name"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"身份证号：",prop:"idNums"}},[e("el-input",{staticStyle:{width:"200px"},attrs:{maxlength:"18",disabled:a.formdisabled,autocomplete:"off"},model:{value:a.ruleForm2.idNums,callback:function(t){a.$set(a.ruleForm2,"idNums",t)},expression:"ruleForm2.idNums"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"身份证上传："}},[e("el-upload",{staticClass:"uploadBox",attrs:{action:a.actionPath,data:a.postData,"show-file-list":!1,"on-success":a.handleAvatarSuccess,disabled:a.formdisabled}},[a.imageUrl?e("img",{staticClass:"avatar",attrs:{src:a.imageUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a._v("手持身份证半身照")])]),a._v(" "),e("el-upload",{staticClass:"uploadBox",attrs:{action:a.actionPath,data:a.postData,"show-file-list":!1,"on-success":a.handleAvatarSuccessBack,disabled:a.formdisabled}},[a.imageUrlBack?e("img",{staticClass:"avatar",attrs:{src:a.imageUrlBack}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a._v("身份证反面")])])],1),a._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",disabled:a.formdisabled},on:{click:function(t){a.submitForm("ruleForm2")}}},[a._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=12.c7ba832e659e055481b4.js.map